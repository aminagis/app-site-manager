<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>APP Site Manager</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

  <style>
    body {
      background: url('chantier-de-construction.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
    }
    .nav-link {
      color: white !important;
    }
    .nav-link.active {
      font-weight: bold;
    }
    .nav-link:hover {
      color: #ddd !important;
      text-decoration: none;
    }
    .nav-link.disabled {
      color: gray !important;
      pointer-events: none;
      cursor: not-allowed;
    }
  </style>
</head>
<body>

  <ul class="nav justify-content-end">
    <li class="nav-item"><a class="nav-link active" href="home.html">Home</a></li>
    <li class="nav-item"><a class="nav-link" href="map.html" id="link-map">Map</a></li>
    <li class="nav-item"><a class="nav-link" href="gestionnaire.html" id="link-gestionnaire">Gestionnaire</a></li>
    <li class="nav-item"><a class="nav-link" href="data.html" id="link-data">Data</a></li>
    <li class="nav-item"><a class="nav-link" href="profil.html" id="link-profil">Profil</a></li>
    <li class="nav-item"><a class="nav-link" href="#" id="logout-btn" style="display:none;">Déconnexion</a></li>
  </ul>

  <div class="container col-md-6 mt-5">
    <form id="login-form">
      <div class="form-group">
        <input type="email" class="form-control" id="inputEmail" placeholder="Votre compte" required>
      </div>
      <div class="form-group">
        <input type="password" class="form-control" id="inputPassword" placeholder="Mot de passe" required>
      </div>
      <center>
        <button type="submit" class="btn btn-light">Se connecter</button>
      </center>
    </form>
    <div id="welcome-msg" style="display:none; text-align:center; margin-top: 20px;">
      <br><br><br>
      <h4>Bienvenue, <span id="user-email"></span> !</h4>
    </div>
  </div>

<script>
  // Simples identifiants en dur (à changer pour un vrai système sécurisé côté serveur !)
  const users = {
    "user1@example.com": "password1",
    "user2@example.com": "password2"
  };

  const loginForm = document.getElementById('login-form');
  const welcomeMsg = document.getElementById('welcome-msg');
  const userEmailSpan = document.getElementById('user-email');
  const logoutBtn = document.getElementById('logout-btn');

  // Liens à protéger
  const protectedLinks = [
    document.getElementById('link-map'),
    document.getElementById('link-gestionnaire'),
    document.getElementById('link-data'),
    document.getElementById('link-profil'),
  ];

  function setLinksState(isLoggedIn) {
    protectedLinks.forEach(link => {
      if (isLoggedIn) {
        link.classList.remove('disabled');
        link.style.pointerEvents = 'auto';
        link.style.color = 'white';
      } else {
        link.classList.add('disabled');
        link.style.pointerEvents = 'none';
        link.style.color = 'gray';
      }
    })};


  function showLoggedIn(email) {
    loginForm.style.display = 'none';
    welcomeMsg.style.display = 'block';
    userEmailSpan.textContent = email;
    logoutBtn.style.display = 'inline-block';
    setLinksState(true);
  }

  function showLoggedOut() {
    loginForm.style.display = 'block';
    welcomeMsg.style.display = 'none';
    logoutBtn.style.display = 'none';
    setLinksState(false);
  }

  // Vérifier si utilisateur est connecté au chargement
  const loggedUser = localStorage.getItem('loggedUser');
  if (loggedUser) {
    showLoggedIn(loggedUser);
  } else {
    showLoggedOut();
  }

  // Gestion du formulaire de connexion
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('inputEmail').value;
    const password = document.getElementById('inputPassword').value;

    if (users[email] && users[email] === password) {
      // Connexion réussie
      localStorage.setItem('loggedUser', email);
      showLoggedIn(email);
    } else {
      alert("Email ou mot de passe incorrect.");
    }
  });

  // Déconnexion
  logoutBtn.addEventListener('click', function(e) {
    e.preventDefault();
    localStorage.removeItem('loggedUser');
    showLoggedOut();
  });
</script>
<center>
 <div class="containe my-4">
  <div class="row">
      <div class="col-md-3">
    <!--cards for all the web pages-->
            <div class="card" style="width: 18rem;">
              <img src="bg-m.jpg" class="card-img-top" >
              <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <font style="color: rgb(225, 0, 255);">
                <p class="card-text">.</p>pour mieux visualiser en general les interventions, acceder à la page Map</font><br>
                <center>
                <a href="map.html" class="btn" style="background-color: purple; color: white;">Map</a></center>
              </div>
            </div>
      </div>
      <div class="col-md-3">
            <div class="card" style="width: 18rem;">
              <img src="bg-a.jpg" class="card-img-top" >
              <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <font style="color: rgb(225, 0, 255);">
                <p class="card-text">.</p>pour mieux planifier vos taches, acceder à la pages gestionnaire</font><br><br>
                <center>
                <a href="gestionnaire.html" class="btn" style="background-color: purple; color: white;">Gestionnaire</a></center>
              </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card" style="width: 18rem;">
              <img src="bg-g.jpg" class="card-img-top" >
              <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <font style="color: rgb(225, 0, 255);">
                <p class="card-text">.</p>Visualisation des interventions sous format tableau et plus...</font><br><br>
                <center>
                <a href="data.html" class="btn" style="background-color: purple; color: white;">Données</a></center>
              </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card" style="width: 18rem;">
              <img src="bg-p.jpg" class="card-img-top" >
              <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <font style="color: rgb(225, 0, 255);">
                <p class="card-text">.</p>Gerer votre profil, acceder à la pages gestionnaire</font><br><br>
                <center>
                <a href="profil.html" class="btn" style="background-color: purple; color: white;">Profil</a></center>
              </div>
            </div>
          </div>



            







  </div>
 </div>
 </center>


</body>
</html>

